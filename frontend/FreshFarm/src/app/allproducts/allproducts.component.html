<app-navbar></app-navbar>

<body>
    <header>
        <h1>Our Agricultural Products</h1>
        <p>High-quality, fresh, and sustainable products straight from our farms just for you.</p>
    </header>

    <div class="search-container mt-5">
        <input type="text" [(ngModel)]="searchQuery" (input)="filterProducts()"
            placeholder="Search by Prodcut Name, Category, Method, or Price...">
    </div>
    <!-- Product Grid -->
    <div class="product-container">
        <div *ngFor="let product of filteredProducts" class="product-card">
            <img src="../../assets/vegetable.png" alt="{{product.product_title}}">
            <h2>{{product.product_title}}</h2>
            <p>Category: {{product.category}}</p>
            <p>Farming Method: {{product.farming_method}}</p>
            <span class="price">Price: TND{{product.price}}/kg</span>
            <button>Add to Cart</button>
        </div>
    </div>


    <!-- Loading Animation -->
    <div *ngIf="products.length == 0" class="product-container d-flex align-items-center justify-content-center">
        <svg style="height: 50px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
            <circle fill="#4CAF50" stroke="#4CAF50" stroke-width="15" r="15" cx="40" cy="100">
                <animate attributeName="opacity" calcMode="spline" dur="2" values="1;0;1;"
                    keySplines=".5 0 .5 1;.5 0 .5 1" repeatCount="indefinite" begin="-.4"></animate>
            </circle>
            <circle fill="#4CAF50" stroke="#4CAF50" stroke-width="15" r="15" cx="100" cy="100">
                <animate attributeName="opacity" calcMode="spline" dur="2" values="1;0;1;"
                    keySplines=".5 0 .5 1;.5 0 .5 1" repeatCount="indefinite" begin="-.2"></animate>
            </circle>
            <circle fill="#4CAF50" stroke="#4CAF50" stroke-width="15" r="15" cx="160" cy="100">
                <animate attributeName="opacity" calcMode="spline" dur="2" values="1;0;1;"
                    keySplines=".5 0 .5 1;.5 0 .5 1" repeatCount="indefinite" begin="0"></animate>
            </circle>
        </svg>
        <h2 class="alert alert-danger mt-3">Products are Loading</h2>
    </div>




    <!-- /add message if there is no product in the filtred -->
    <div *ngIf="filteredProducts.length == 0"
        class="product-container d-flex align-items-center justify-content-center">
        <svg style="height: 55px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 150">
            <path fill="none" stroke="#368B3A" stroke-width="15" stroke-linecap="round" stroke-dasharray="300 385"
                stroke-dashoffset="0"
                d="M275 75c0 31-27 50-50 50-58 0-92-100-150-100-28 0-50 22-50 50s23 50 50 50c58 0 92-100 150-100 24 0 50 19 50 50Z">
                <animate attributeName="stroke-dashoffset" calcMode="spline" dur="2" values="685;-685"
                    keySplines="0 0 1 1" repeatCount="indefinite"></animate>
            </path>
        </svg>
        <h2 class="alert alert-danger mt-3">No Products Found</h2>
    </div>
</body>